<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>N-Body Simulator ‚Äî 3D Gravitational Dynamics</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="canvas-container">
        <div id="info">Drag to rotate ‚Ä¢ Scroll to zoom</div>
    </div>

    <div id="panel">
        <h2>üìä N-Body Simulation</h2>
        
        <div class="param-row">
            <label>Time step (dt):</label>
            <span id="dtValue">0.001</span>
        </div>
        <input type="range" id="dtSlider" min="0.0001" max="0.01" step="0.0001" value="0.001">
        
        <div class="param-row">
            <label>Simulated time:</label>
            <span id="timeValue">0.000</span>
        </div>
        
        <div class="param-row">
            <label>Energy (initial):</label>
            <span id="E0Value">‚Äì</span>
        </div>
        <div class="param-row">
            <label>Energy (current):</label>
            <span id="E1Value">‚Äì</span>
        </div>
        <div class="param-row">
            <label>Rel. error:</label>
            <span id="relErrorValue">‚Äì</span>
        </div>

        <div class="buttons">
            <button id="playBtn">‚ñ∂Ô∏è Play</button>
            <button id="pauseBtn" disabled>‚è∏Ô∏è Pause</button>
            <button id="resetBtn">‚Ü∫ Reset</button>
        </div>

        <div class="param-row" style="flex-direction: column; align-items: flex-start; gap: 5px;">
            <label>Number of Bodies (N):</label>
            <input type="range" id="nBodiesSlider" min="2" max="20" value="3" step="1">
            <span id="nBodiesValue">3</span>
        </div>

        <div class="param-row" style="flex-direction: column; align-items: flex-start; gap: 5px;">
            <label>Initial Configuration:</label>
            <select id="configSelect">
                <option value="lagrange">Lagrangian Equilateral</option>
                <option value="figure8">Figure-8 Orbit</option>
                <option value="chaotic">Random Chaotic</option>
            </select>
        </div>

        <div class="buttons">
            <button id="recordBtn">‚è∫Ô∏è Record Video</button>
        </div>

        <div class="param-row">
            <label>Show Gravitational Field:</label>
            <input type="checkbox" id="showField">
        </div>

        <!-- Body Editor -->
        <div class="param-row" style="flex-direction: column; align-items: flex-start; gap: 8px; margin-top: 20px; padding-top: 15px; border-top: 1px solid #2d3748;">
            <label>Edit Body Parameters:</label>
            <select id="bodySelect">
                <!-- Popolato dinamicamente -->
            </select>

            <div style="width:100%; display:flex; gap:8px; flex-wrap:wrap;">
                <div style="flex:1; min-width:100px;">
                    <label>Mass:</label>
                    <input type="range" id="massSlider" min="0.1" max="5" step="0.1" value="1">
                    <span id="massValue">1.0</span>
                </div>
            </div>

            <div style="width:100%; display:grid; grid-template-columns: repeat(3, 1fr); gap:6px; margin-top:5px;">
                <div><label>X:</label><input type="number" id="posX" step="0.01" value="0"></div>
                <div><label>Y:</label><input type="number" id="posY" step="0.01" value="0"></div>
                <div><label>Z:</label><input type="number" id="posZ" step="0.01" value="0"></div>
            </div>
            <div style="width:100%; display:grid; grid-template-columns: repeat(3, 1fr); gap:6px; margin-top:5px;">
                <div><label>Vx:</label><input type="number" id="velX" step="0.01" value="0"></div>
                <div><label>Vy:</label><input type="number" id="velY" step="0.01" value="0"></div>
                <div><label>Vz:</label><input type="number" id="velZ" step="0.01" value="0"></div>
            </div>

            <div class="buttons" style="margin-top:10px;">
                <button id="applyBtn">‚úÖ Apply</button>
                <button id="randomizeBtn">üé≤ Randomize</button>
            </div>
        </div>

        <div class="status">
            <div>Status: <span id="statusText">Paused</span></div>
        </div>
    </div>

<!-- Three.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>

<!-- Fisica -->
<script src="physics.js"></script>

<!-- Motore -->
<script src="simulation-engine.js"></script>

<!-- UI: ordine importante! -->
<script src="ui/UIUtils.js"></script>
<script src="ui/GravitationalField.js"></script>
<script src="ui/VideoRecorder.js"></script>
<script src="ui/BodyEditor.js"></script>
<script src="ui/UIController.js"></script>

<!-- App -->
<script src="app.js"></script>
</body>
</html>
